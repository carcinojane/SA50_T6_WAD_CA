<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<title th:utext="#{staff.applyLeave.title}"></title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="stylesheet" type="text/css" media="all"
	href="../../css/main.css" th:href="@{/css/main.css}" />
<link rel="stylesheet" type="text/css" media="all"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script type="text/javascript" src="../../js/navbar.js"></script>
<script type="text/javascript" src="../../js/login.js"></script>
<script type="text/javascript" src="../../js/search.js"></script>
</head>
<body>
	<header th:insert="staff_homepage.html :: header"> </header>
	<div class="content">
		<h2 th:utext="#{staff.applyLeave.title}"></h2>
		
		<div th:if="${not #lists.isEmpty(lrecords)}">
		<h3>Search</h3>
		<input id="userInput" type="text" placeholder="Search..">
		<input type="hidden" id="dummy1" class="search-key" placeholder="">     
        <input type="hidden" id="dummy2" class="search-key" placeholder="">
        
		<select id="leavetype" class="search-key">
          <option value=""></option>
          <option value="Annual Leave">Annual Leave</option>
          <option value="Medical Leave">Medical Leave</option>
          <option value="Compensation Leave">Compensation Leave</option>
        </select>
        
        <select id="leavestatus" class="search-key">
          <option value=""></option>
          <option value="Applied">Applied</option>
          <option value="Approved">Approved</option>
          <option value="Rejected">Rejected</option>
          <option value="Cancelled">Cancelled</option>
          <option value="Updated">Updated</option>
        </select>
        
        <input type="hidden" id="dummy3" class="search-key" placeholder="">        
		</div>
		
		<h3 th:if="${not #lists.isEmpty(lrecords)}">Listing</h3>
		
        <p th:if="${#lists.isEmpty(lrecords)}">No leave records found.</p>
        <table id="leavetable" class="list" th:if="${not #lists.isEmpty(lrecords)}">
        <thead>
            <tr>
                <th style="width: 20%">From</th>
				<th style="width: 22.5%">To</th>
				<th style="width: 22.5%">Category</th>
				<th style="width: 17.5%">Status</th>
				<th style="width: 17.5%">Action</th>
            </tr>
		</thead>
		<tbody id="leaveRecordTable">
			<tr th:each="leave:${lrecords}">
				<td data-input="dummy1" th:text="${leave.leaveStartDate}">From</td>
				<td data-input="dummy2" th:text="${leave.leaveEndDate}">To</td>
				<td data-input="leavetype" th:text="${leave.leaveTypeDisplay}">Category</td>
				<td data-input="leavestatus" th:text="${leave.leaveStatus.displayValue}">Status</td>
				<td data-input="dummy3" th:href="@{/staff/history/details} + ${leave.leaveId}">Details</td>
            </tr>
		</tbody>
    </table>
    
    <p>
		<a href="staff_applyLeave_add.html" th:href="@{/staff/apply/add}"><button>Add</button></a>
	</p>
	</div>

<script>
var $filterableRows = $('#leavetable').find('tr').not(':first'),
$inputs = $('.search-key');

$inputs.on('input', function() {

$filterableRows.hide().filter(function() {
return $(this).find('td').filter(function() {

var tdText = $(this).text().toLowerCase(),
		inputValue = $('#' + $(this).data('input')).val().toLowerCase();

return tdText.indexOf(inputValue) != -1;

}).length == $(this).find('td').length;
}).show();

});
</script>
</body>
</html>